<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='stylesheets/themes.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='stylesheets/wordle.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='stylesheets/keyboard.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='stylesheets/tiles.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='stylesheets/modals.css') }}"> -->
    <style type="text/css">
        #keyboard-container {
    display: block;
    margin-top: 15px;
}

#keyboard {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;

    /* change */
    font-size: 24px;

    min-height: 80px;

    margin: 10px;
}

.k-row {
    display: flex;
    flex-direction: row;
    touch-action: manipulation;
}

#keyboard button {
    border: none;
    outline: none;
    text-transform: uppercase;
    cursor: pointer;
    border-radius: 4px;

    background-color: var(--keyboard-btn-color);
    color: var(--keyboard-font-color);

    font-family: Urbanist;
    font-weight: bold;

    margin: 3px;
    padding: 2px;

    min-width: min-content;
    min-height: 24px;
    height: 11vh;
    max-height: 55px;

    transition: opacity 150ms ease,
        transform 150ms ease,
        background-color 150ms ease,
        color 150ms ease;
}

#keyboard button[data-active='true'] {
    opacity: 0.8;
    transform: scale(0.93);
}

#keyboard button:hover {
    opacity: 0.8;
    transform: scale(0.98);
}

#keyboard button:active {
    transform: scale(0.93);
}

#keyboard button[data-key]:not(.one-and-a-half) {
    font-size: 1.2rem;

    width: 8vw;
    max-width: 40px;
}

.one-and-a-half {
    font-size: 1rem;

    width: 13vw;
    max-width: 65px;
}

#backspace {
    background: var(--backspace-btn);

    min-width: 24px;

    width: 100%;
    height: 100%;
}

@media screen and (max-width: 500px) {
    #keyboard button {
        min-height: 24px;
        height: 6vh;
    }

    #keyboard button[data-key]:not(.one-and-a-half) {
        font-size: 0.7rem;

        width: 6vw;
        max-width: 30px;
    }

    .one-and-a-half {
        font-size: 0.6rem;

        width: 13vw;
        max-width: 65px;
    }
}
    </style>
    <style type="text/css">/* modals */
        #large-modals {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: flex-start;
            position: relative;
        }
        
        /* general modal classes */
        .modal-close {
            display: flex;
            background: var(--modal-close);
            width: 24px;
            height: 24px;
            transition: background 300ms ease;
            cursor: pointer;
        }
        
        .modal {
            display: none;
            position: absolute;
            flex-direction: column;
            pointer-events: none;
            user-select: none;
        
            min-width: 260px;
            width: calc(100vw - 30px);
        
            min-height: calc(100vh - 60px);
        
            background-color: var(--full-modal-bkg-color);
            opacity: 0;
            transform: translateY(20px);
        
            transition: transform 100ms ease,
                height 120ms ease,
                min-height 120ms ease,
                background-color 160ms ease,
                opacity 160ms ease;
        
            padding: 15px;
            z-index: -2;
        }
        
        .modal.open {
            pointer-events: all;
            user-select: auto;
            opacity: 1;
            transform: translateY(0);
        
            min-height: calc(100vh - 30px);
            height: min-content;
            z-index: 2;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
        
            font-family: Urbanist;
            color: var(--font-color);
            font-size: 22px;
        
            margin-bottom: 40px;
        }
        
        .modal-title {
            margin-left: 25px;
        }
        
        .modal-content {
            display: flex;
            position: relative;
            flex-direction: column;
        
            margin: 0 22.5%;
            font-family: Urbanist;
            font-size: 17px;
        }
        
        /* help examples */
        #help-modal-content>p {
            margin: 10px 0;
        }
        
        #help-examples {
            display: flex;
            flex-direction: column;
        
            border-top: var(--header-border-bottom);
            border-bottom: var(--header-border-bottom);
        }
        
        .example {
            display: inline-flex;
            flex-direction: column;
            margin-top: 24px;
            margin-bottom: 0px;
        }
        
        @media screen and (max-width: 800px) {
            .modal-content {
                margin: 0 20px;
            }
        }
        
        /* toggle switch styles */
        .setting-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: var(--header-border-bottom);
            margin-top: 20px;
        }
        
        .setting-label h6,
        .setting-label h5 {
            font-weight: 100;
            margin: 10px 0 15px 0;
        }
        
        .switch {
            display: inline-flex;
            align-items: center;
            position: relative;
            font-size: 20px;
        
            min-height: 20px;
            min-width: 40px;
            background: var(--theme-back-color);
            border-radius: 10px;
        
            transition: 300ms ease;
        
            margin-left: 15px;
            cursor: pointer;
        }
        
        .switch input {
            position: absolute;
            left: -5px;
            opacity: 0;
            min-width: 40px;
            min-height: 20px;
            z-index: 1;
            cursor: pointer;
        }
        
        .switch input[disabled] {
            cursor: not-allowed;
        }
        
        .switch div {
            margin: 0px 1px 0px 1px;
            min-height: 18px;
            min-width: 18px;
            border-radius: 100%;
            box-shadow: 0 0.1em 0.3em rgba(0, 0, 0, 0.3);
            transition: all 300ms cubic-bezier(0.6, 0.09, 0.27, 0.96);
            background: var(--theme-switch-color);
            z-index: 0;
        }
        
        .switch input:checked+div {
            transform: translateX(20px);
            background: var(--theme-switch-color);
        }
        
        #modes-select {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            outline: none;
            border: none;
        
            padding: 5px;
            margin-left: 15px;
            border-radius: 3px;
            background-color: var(--theme-back-color);
            color: var(--color-tone-7);
            font-family: Urbanist;
        }
        
        /* small modal for statistics*/
        #small-modals {
            display: flex;
            justify-content: center;
            align-items: center;
            position: absolute;
            pointer-events: none;
            user-select: none;
        
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }
        
        .small-modal {
            display: none;
            flex-direction: column;
            position: absolute;
            pointer-events: all;
            overflow: auto;
        
            background-color: var(--full-modal-bkg-color);
            border-radius: 15px;
        
            min-width: 240px;
            width: 75%;
            max-width: 700px;
            min-height: 200px;
            height: 45%;
            max-height: 600px;
        
            opacity: 0;
            transform: translateY(20px);
        
            transition: transform 100ms ease,
                background-color 160ms ease,
                opacity 160ms ease;
        
            margin-top: 20px;
            padding: 20px;
            z-index: 1000;
        }
        
        .small-modal.open {
            opacity: 1;
            transform: translateY(0px);
        }
        
        @media screen and (max-height: 210px) {
            #small-modals {
                align-items: flex-start;
            }
        }
        
        #stats-content {
            display: grid;
            grid-template-rows: auto;
            justify-items: center;
            align-items: center;
            gap: 10px;
            font-family: Urbanist;
            color: var(--font-color);
        }
        
        #stats-info {
            display: grid;
            align-items: center;
            justify-content: center;
            width: fit-content;
        }
        .stats-row {
            display: grid;
            grid-template-rows: repeat(2, 1fr); 
            grid-template-columns: repeat(4, 1fr); 
            align-content: center;
            justify-content: center;
        
            height: min-content;
            margin-bottom: 20px;
            gap: 10px;
        }
        
        .stats-row>div {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-evenly;
            text-align: center;
        
            margin: 0 20px;
            min-width: 50px;
        }
        
        .stats-row h6 {
            font-size: 12px;
            font-weight: 100;
            margin: 5px 0;
        }
        
        .stats-row h4 {
            margin: 5px 0;
            font-size: 20px;
        }
        /* guess dist */
        #stats-dist {
            display: grid;
            grid-template-rows: repeat(2, auto);
            grid-template-columns: 1fr;
            justify-content: center;
            align-items: center;
            width: 75%;
            height: auto;
        }
        #guess-distribution {
            display: grid;
            grid-template-rows: repeat(6, 1fr);
            padding: 20px;
        }
        #stats-dist h3 {
            text-align: center;
            margin-bottom: 15px;
            font-weight: 100;
        }
        
        .graph-container {
            width: 100%;
            height: 25px;
            display: flex;
            align-items: center;
            padding-bottom: 4px;
            font-size: 14px;
            line-height: 20px;
        }
        
        .graph {
            width: 100%;
            height: 100%;
            padding-left: 4px;
        }
        
        .graph-bar {
            height: 100%;
            width: 7%;
            position: relative;
            background-color: var(--color-absent);
            display: flex;
            justify-content: center;
        }
        
        .graph-bar.highlight {
            background-color: var(--color-correct);
        }
        
        .graph-bar.align-right {
            justify-content: flex-end;
            align-items: center;
            padding-right: 8px;
            padding-left: 8px;
        }
        
        .num-guesses {
            font-weight: bold;
            color: #fff;
        }
        
        .guess {
            text-align: center;
            min-width: 8px;
        }
        
        /* other stats like timer, share btn */
        #stats-other {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            justify-items: center;
            align-items: center;
            margin-top: 30px;
            width: 80%;
            max-width: 400px;
        }
        #stats-other[data-btn-visible="false"] {
            grid-template-columns: repeat(1, 1fr);
        }
        #stats-other > * {
            padding: 20px;
        }
        
        @media screen and (max-width: 520px) {
            .stats-row {
                grid-template-rows: repeat(4, 1fr); 
                grid-template-columns: repeat(2, 1fr); 
        
                gap: 10px;
            }
            #stats-other {
                grid-template-rows: repeat(2, 1fr);
                grid-template-columns: repeat(1, 1fr);
            }
            #stats-dist {
                width: 85%;
            }
        }
        @media screen and (max-width: 350px) {
            .stats-row {
                grid-template-rows: repeat(8, 1fr); 
                grid-template-columns: repeat(1, 1fr); 
        
                gap: 10px;
            }
        }
        
        #stats-timer {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        
            font-family: Urbanist;
            color: var(--font-color);
        }
        
        /* timer */
        #timer {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            width: 100px;
            aspect-ratio: 1;
        }
        #timer-back {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: absolute;
            
            background: var(--timer-back-color);
            border-radius: 100%;
            width: 140px;
            aspect-ratio: 1;
        }
        #timer-mask {
            z-index: 80;
            position: absolute;
            width: 70%;
            aspect-ratio: 1;
            border-radius: 100%;
            background-color: var(--full-modal-bkg-color);
        }
        #timer-pie {
            z-index: 70;
            width: 140px;
            aspect-ratio: 1;
            border-radius: 50%;
            position: absolute;
            transition: 200ms ease;
            background: conic-gradient(var(--timer-fill-color) 0%, #0000 0);
        }
        #time-left {
            z-index: 100;
        }
        #stats-share {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: none;
            outline: none;
        
            color: var(--font-color);
            font-family: Urbanist;
        
            transition: 150ms ease;
            cursor: pointer;
        
            width: 130px;
            height: 70px;
            border-radius: 10px;
        
            background-color: var(--secondary-color);
        }
        #stats-other[data-btn-visible="false"] button {
            display: none;
        }
            
        #stats-share:hover {
            opacity: 0.95;
            transform: scale(0.98);
        }
        #stats-share:active {
            opacity: 0.9;
            transform: scale(0.95);
        }
        #stats-share[data-clicked="true"] {
            background-color: var(--color-correct);
        }
    </style>
    <style type="text/css">
        @import url('https://fonts.googleapis.com/css2?family=Urbanist&display=swap');
:root {
    --primary-color: rgb(15, 24, 34);
    --secondary-color: rgb(28, 43, 61);
    --font-color: rgb(200, 229, 255);
    --visited-font-color: rgb(134, 167, 199);
    --theme-back-color: hsl(210, 29%, 45%);
    --theme-switch-color: hsl(209, 45%, 26%);
    --header-border-bottom: 1px solid rgb(81, 121, 158);
    --help-button: url(../images/help_icon_light.png) no-repeat center;
    --full-modal-bkg-color: rgb(39, 66, 94);
    --modal-close: url(../images/light_x.png) no-repeat center;
    --stats-button: url(../images/leaderboard-white.png) no-repeat center;
    --settings-button: url(../images/settings-white.png) no-repeat center;
    --msg-bkg-color: var(--full-modal-bkg-color);
    --tile-text-color: hsl(0, 0%, 100%);
    --timer-back-color: var(--secondary-color);
    --timer-fill-color: rgb(97, 127, 165);

    --keyboard-btn-color: rgb(118, 143, 184);
    --keyboard-font-color: rgb(0, 0, 0);
    --backspace-btn: url(../images/backspace-black.png) no-repeat center;

    --color-tone-4: #3a3a3c;
    --color-tone-3: #565758;
    --color-tone-7: #121213;
    --color-tone-1: #ffffff;

    --color-correct: #6aaa64;
    --color-present: #c9b458;
    --color-absent: #3a3a3c;
}

[data-theme="light"] {
    --primary-color: rgb(163, 181, 211);
    --secondary-color: rgb(129, 143, 167);
    --font-color: rgb(1, 4, 8);
    --visited-font-color: rgb(22, 47, 80);
    --theme-back-color: hsl(210, 40%, 65%);
    --theme-switch-color: hsl(209, 35%, 35%);
    --header-border-bottom: 1px solid rgb(71, 100, 128);
    --help-button: url(../images/help_icon_dark.png) no-repeat center;
    --full-modal-bkg-color: rgb(194, 209, 224);
    --modal-close: url(../images/dark_x.png) no-repeat center;
    --stats-button: url(../images/leaderboard-black.png) no-repeat center;
    --settings-button: url(../images/settings-black.png) no-repeat center;
    --msg-bkg-color: var(--full-modal-bkg-color);
    --tile-text-color: hsl(0, 0%, 100%);
    --timer-back-color: var(--secondary-color);
    --timer-fill-color: rgb(66, 86, 112);

    --keyboard-btn-color: rgb(15, 24, 34);
    --keyboard-font-color: rgb(255, 255, 255);
    --backspace-btn: url(../images/backspace-white.png) no-repeat center;

    --color-tone-4: #3a3a3c;
    --color-tone-3: #565758;
    --color-tone-7: #121213;
    --color-tone-1: #ffffff;

    --color-correct: #6aaa64;
    --color-present: #c9b458;
    --color-absent: #3a3a3c;
}
    </style>
    <style type="text/css">
        /* game */
#game {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    height: calc(100vh - 52px);
    transition: 150ms ease;
}
#game.hide {
    overflow: hidden;
    opacity: 0.2;
    pointer-events: none;
    user-select: none;
}

#board-container {
    display: flex;
    justify-content: flex-start;
    height: 100%;
}

#board {
    display: grid;
    grid-template-rows: repeat(5, 1fr);
    gap: 5px;
    height: min-content;
    margin-top: 10px;
}

.row {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    grid-gap: 5px;
    max-width: min-content;
    font-size: 14px;
}

game-tile {
    display: inline-block;
    width: 4em;
    height: 4em;
}

.tile {
    width: 100%;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    font-size: 2rem;
    line-height: 2rem;
    font-weight: bold;
    vertical-align: middle;
    box-sizing: border-box;
    color: var(--tile-text-color);
    text-transform: uppercase;
    user-select: none;
    font-family: Urbanist;
    transition: 150ms ease;
}

.tile::before {
    content: '';
    display: inline-block;
    padding-bottom: 100%;
}

@media (max-width: 350px) {
    .tile {
        font-size: 1.5em;
        line-height: 1.5em;
    }
    .row {
        font-size: 1vmax;
    }
    #game {
        height: fit-content;
    }
}

/* States */
.tile[data-state='empty'] {
    border: 2px solid var(--color-tone-4);
}

.tile[data-state='tbd'] {
    background-color: var(--color-tone-7);
    border: 2px solid var(--color-tone-3);
    color: var(--color-tone-1);
}

.tile[data-state='correct'],
button[data-state='correct'] {
    background-color: var(--color-correct) !important;
}

.tile[data-state='present'],
button[data-state='present'] {
    background-color: var(--color-present) !important;
}

.tile[data-state='absent'],
button[data-state='absent'] {
    background-color: var(--color-absent) !important;
}

/* Tile Animations */
.tile[data-animation='pop'] {
    animation-name: PopIn;
    animation-duration: 100ms;
}

@keyframes PopIn {
    from {
        transform: scale(0.8);
        opacity: 0;
    }

    40% {
        transform: scale(1.1);
        opacity: 1;
    }
}

.tile[data-animation='flip-in'] {
    animation-name: FlipIn;
    animation-duration: 250ms;
    animation-timing-function: ease-in;
}

@keyframes FlipIn {
    0% {
        transform: rotateX(0);
    }

    100% {
        transform: rotateX(-90deg);
    }
}

.tile[data-animation='flip-out'] {
    animation-name: FlipOut;
    animation-duration: 250ms;
    animation-timing-function: ease-in;
}

@keyframes FlipOut {
    0% {
        transform: rotateX(-90deg);
    }

    100% {
        transform: rotateX(0);
    }
}

.win {
    animation-name: Bounce;
    animation-duration: 1000ms;
}

@keyframes Bounce {

    0%,
    20% {
        transform: translateY(0);
    }

    40% {
        transform: translateY(-30px);
    }

    50% {
        transform: translateY(5px);
    }

    60% {
        transform: translateY(-15px);
    }

    80% {
        transform: translateY(2px);
    }

    100% {
        transform: translateY(0);
    }
}

game-row[invalid] {
    animation-name: Shake;
    animation-duration: 600ms;
}

@keyframes Shake {

    10%,
    90% {
        transform: translateX(-1px);
    }

    20%,
    80% {
        transform: translateX(2px);
    }

    30%,
    50%,
    70% {
        transform: translateX(-4px);
    }

    40%,
    60% {
        transform: translateX(4px);
    }
}
    </style>
    <style type="text/css">
@import url('https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap');
body {
    background-color: var(--primary-color);
    color: var(--font-color);
    transition: 150ms ease-in;
    margin: 0;
    padding: 0;
    height: 100%;
}

/* header elements */
header {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;

    min-width: 250px;
    padding: 0 5px;
    height: 50px;
    border-bottom: var(--header-border-bottom);
}

header div {
    margin: 0 5px;
}

#title-container {
    display: flex;
    flex-direction: row;
    align-items: center;
    color: var(--font-color);
    transition: 150ms ease-in;
    margin-left: 40px;
}
#title {
    font-family: Urbanist;
    font-size: 28px;
    font-weight: bold;
}
#title-mode {
    font-family: Dancing Script;
    font-size: 28px;
}


@media screen and (max-width: 350px) {
    header {
        flex-direction: column;
        justify-content: center;
        align-items: center;

        min-width: 140px;
        padding: 0 5px;
        height: 200px;
    }
    #title-container {
        flex-direction: column;
        margin: 0;
    }
    #title {
        margin-left: 10px;
    }
    header div {
        margin: 5px 5px;
    }
}
#help {
    background: var(--help-button);
    width: 24px;
    height: 24px;
    transition: 150ms ease-in;
    cursor: pointer;
}



#menu-right {
    display: flex;
}

#stats {
    background: var(--stats-button);
    width: 24px;
    height: 24px;
    transition: 150ms ease-in;
    cursor: pointer;
}

#settings {
    background: var(--settings-button);
    width: 24px;
    height: 24px;
    transition: 150ms ease-in;
    cursor: pointer;
}

#msg {
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: Urbanist;

    opacity: 0;
    transform: translateY(30px);
    transition: 150ms ease;

    min-width: 100px;
    width: max-content;
    max-width: 300px;
    min-height: 25px;
    height: min-content;

    background-color: var(--msg-bkg-color);
    color: var(--font-color);
    border-radius: 15px;

    margin: 20px 0 15px 0;
    padding: 10px;
    z-index: 1000000;
}
#msg a {
    margin-left: 5px;
    color: var(--font-color);
}
#msg a:visited {
    color: var(--visited-font-color);
}
    </style>
    <script type="text/javascript" defer>
    (() => {
        const game = document.getElementById('game');
        const modalClose = document.querySelectorAll('.modal-close');
    
        const settingsBtn = document.getElementById('settings')
        const settingsModal = document.getElementById('settings-modal')
    
        const statsBtn = document.getElementById('stats')
        const statsModal = document.getElementById('stats-modal');
    
        const helpBtn = document.getElementById('help')
        const helpModal = document.getElementById('help-modal');
        const helpExamples = document.getElementById('help-examples');
        const exampleTiles = helpExamples.querySelectorAll('.tile')
    
        function flipTile(tile) {
            tile.setAttribute('data-animation', 'flip-in')
            setTimeout(() => {
                tile.setAttribute('data-animation', 'flip-out')
                setTimeout(() => {
                    tile.setAttribute('data-animation', 'idle')
                }, 250);
            }, 250);
        }
    
        function closeModal(el) {
            el.classList.remove('open');
            game.classList.remove('hide')
            setTimeout(() => {
                el.style.display = 'none'
            }, 200);
        }
    
        helpBtn.addEventListener('click', () => {
            if (helpModal.classList.contains('open')) {
                closeModal(helpModal)
                game.classList.remove('hide')
            } else {
                if (helpModal.style.display !== 'flex') {
                    closeModal(statsModal)
                    closeModal(settingsModal)
    
                    helpModal.style.display = 'flex'
                    game.classList.add('hide')
    
                    setTimeout(() => {
                        helpModal.classList.add('open')
                        exampleTiles.forEach(tile => {
                            if (tile.getAttribute('data-state') !== 'tbd') {
                                setTimeout(() => {
                                    flipTile(tile)
                                }, 200);
                            }
                        })
                    }, 1);
                }
    
            }
        })
        settingsBtn.addEventListener('click', () => {
            if (settingsModal.classList.contains('open')) {
                closeModal(settingsModal)
                game.classList.remove('hide')
            } else {
                if (settingsModal.style.display !== 'flex') {
                    closeModal(statsModal)
                    closeModal(helpModal)
    
                    settingsModal.style.display = 'flex'
                    game.classList.add('hide')
    
                    setTimeout(() => {
                        settingsModal.classList.add('open')
                    }, 1);
                }
            }
        })
        statsBtn.addEventListener('click', () => {
            if (statsModal.classList.contains('open')) {
                game.classList.remove('hide')
                closeModal(statsModal)
            } else {
                if (statsModal.style.display !== 'flex') {
                    closeModal(settingsModal)
                    closeModal(helpModal)
    
                    game.classList.add('hide')
                    statsModal.style.display = 'flex'
    
                    setTimeout(() => { // wait for background to hide and modal to show
                        statsModal.classList.add('open')
                    }, 1);
    
                    document.onclick = (e) => { // close modal on click outside
                        if (e.path.includes(statsModal)) return
                        if (!e.target.id || e.target.id !== 'stats') {
                            document.onclick = null;
                            closeModal(statsModal)
                            game.classList.remove('hide')
                        }
                    }
                }
            }
        })
        modalClose.forEach(btn => {
            btn.addEventListener('click', () => {
                closeModal(helpModal)
                closeModal(settingsModal)
                closeModal(statsModal)
            })
        })
    
        const modeSelect = document.getElementById('modes-select')
        modeSelect.value = window.localStorage.getItem('mode') || 'english' // preload the mode
        const titleMode = document.getElementById('title-mode') // preload the mode in the title
        titleMode.innerText = modeSelect.value
    
        modeSelect.addEventListener('change', () => {
            titleMode.innerText = modeSelect.value
            let lclstorageMode = window.localStorage.getItem('mode')
            if (lclstorageMode !== modeSelect.value) {
                window.localStorage.setItem('mode', modeSelect.value)
                window.location.reload()
            }
        })
    
        let boardState = JSON.parse(window.localStorage.getItem(modeSelect.value + '_boardState')) // get the board state
        const hardModeSwitch = document.getElementById('hard-mode-checkbox')
    
        hardModeSwitch.checked = boardState ? boardState.hardMode : false // load previous value
    
        hardModeSwitch.parentNode.addEventListener('click', () => {
            boardState = JSON.parse(window.localStorage.getItem(modeSelect.value + '_boardState'))
            if (boardState.rowIndex !== 0) {
                hardModeSwitch.checked = boardState.hardMode ? true : false
                hardModeSwitch.toggleAttribute('disabled', true)
                return
            } else {
                boardState.hardMode = hardModeSwitch.checked
                window.localStorage.setItem(modeSelect.value + '_boardState', JSON.stringify(boardState))
            }
        })
    
        // convert ms to hours, minutes, seconds and ms
        function msToTime(duration) {
            var milliseconds = Math.floor((duration % 1000) / 100),
                seconds = Math.floor((duration / 1000) % 60),
                minutes = Math.floor((duration / (1000 * 60)) % 60),
                hours = Math.floor((duration / (1000 * 60 * 60)) % 24);
    
            hours = (hours < 10) ? "0" + hours : hours;
            minutes = (minutes < 10) ? "0" + minutes : minutes;
            seconds = (seconds < 10) ? "0" + seconds : seconds;
            return hours + ":" + minutes + ":" + seconds + "." + milliseconds;
        }
        const timeText = document.getElementById('time-left')
        const timerFill = document.getElementById('timer-pie')
    
        function updateTime(nextWordTS) {
            const currentTS = new Date().getTime()
            const timeLeft = nextWordTS - currentTS
            timeText.innerText = msToTime(timeLeft)
    
            const totalTime = 24 * 60 * 60 * 1000
            const timeLeftPercent = (timeLeft / totalTime) * 100
            timerFill.style.background = `conic-gradient(var(--timer-fill-color) ${100-timeLeftPercent}%, #0000 0)`
        }
    
        const nextWordTS = new Date().setHours(0, 0, 0, 0) + (24 * 60 * 60 * 1000)
        updateTime(nextWordTS, timeText)
        setInterval(() => {
            if (!statsModal.classList.contains('open')) return // stop updating if the modal is closed, to avoid using up resources
            updateTime(nextWordTS, timeText)
        }, 100);
    
    })()
    </script>
    <script type="text/javascript" defer>
const toggleSwitch = document.getElementById('theme-checkbox');
const currentTheme = localStorage.getItem('theme');

if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);
    if (currentTheme === 'light') {
        toggleSwitch.checked = true
    }
}

function switchTheme() {
    if (toggleSwitch.checked) {
        document.documentElement.setAttribute('data-theme', 'light');
        localStorage.setItem('theme', 'light');
    } else if (!toggleSwitch.checked) {
        document.documentElement.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
    }
}

toggleSwitch.addEventListener('click', switchTheme);
    </script>
    <script type="text/javascript" defer>
        (() => {
    const keyboard = document.getElementById('keyboard');
    const keys = keyboard.querySelectorAll('button');
    keys.forEach(btn => {
        btn.onclick = () => {
            const key = btn.getAttribute('data-key')
            const keyCode = btn.getAttribute('data-key').charCodeAt()

            document.dispatchEvent(new KeyboardEvent('keydown', {
                key,
                keyCode,
                bubbles: true,
                cancelable: true,
                shiftKey: false,
                altKey: false,
                ctrlKey: false,
                metaKey: false,
                repeat: false,
            }));
        }
    })

    // If the user presses a key on their keyboard, instead of the on-screen keyboard, still animate the key
    document.addEventListener('keydown', (e) => {
        if(!e.isTrusted) return // Ignore synthetic events from on-screen keyboard
        const key = e.key
        
        const keyBtn = keyboard.querySelector(`button[data-key="${key}"]`)
        if (!keyBtn) return
        keyBtn.setAttribute('data-active', 'true')
        const keyUp = document.addEventListener('keyup', (e) => {
            if (key === e.key) {
                keyBtn.removeAttribute('data-active')
                document.removeEventListener('keyup', keyUp)
            }
        })
    })
})()
    </script>
    <script type="text/javascript" defer>
        (async () => {
    const MESSAGES = new Map().set('english', [
        ['Unbelieveable!', 'Incredible!'],
        ['Spectacular!', 'Amazing!'],
        ['Impressive!', 'Remarkable!'],
        ['Great Job!', 'Cool!'],
        ['Nice!', 'Great!'],
        ['Phew!', 'Close one!']
    ]).set('spanish', [
        ['¡Increíble!', '¡Impresionante!'],
        ['¡Espectacular', '¡Magnífico!', '¡Asombroso!'],
        ['¡Extraordinario!', '¡Impresionante!'],
        ['¡Buen trabajo!', '¡Excelente!'],
        ['¡Genial!', '¡Excelente!'],
        ['¡Uf!', '¡Cierra uno!']
    ])

    function flipTile(tile) {
        tile.setAttribute('data-animation', 'flip-in')
        setTimeout(() => {
            tile.setAttribute('data-animation', 'flip-out')
            setTimeout(() => {
                tile.setAttribute('data-animation', 'idle')
            }, 250);
        }, 250);
    }

    function popTile(tile) {
        tile.setAttribute('data-animation', 'pop')
        setTimeout(() => {
            tile.setAttribute('data-animation', 'idle')
        }, 100);
    }

    function shakeRow(gameRow) {
        gameRow.setAttribute('invalid', '')
        setTimeout(() => {
            gameRow.removeAttribute('invalid', '')
        }, 600);
    }


    const helpModal = document.getElementById('help-modal')
    const settingsModal = document.getElementById('settings-modal')
    const statsModal = document.getElementById('stats-modal')

    function openStats() {
        if (helpModal.style.display === 'flex' ||
            settingsModal.style.display === 'flex' ||
            statsModal.style.display === 'flex') return
        const statsBtn = document.getElementById('stats')
        statsBtn.dispatchEvent(new MouseEvent('click'));
    }

    function openHelp() {
        if (helpModal.style.display === 'flex' ||
            settingsModal.style.display === 'flex' ||
            statsModal.style.display === 'flex') return
        const helpBtn = document.getElementById('help')
        helpBtn.dispatchEvent(new MouseEvent('click'));
    }

    function displayMsg(message = 'Error', time = 5000, color = 'var(--full-modal-bkg-color)') {
        const msg = document.getElementById('msg')

        if (msg.style.transform === 'translateY(-100%)') {
            msg.style.transform = 'translateY(30px)'
        }
        setTimeout(() => {
            msg.style.backgroundColor = color
            msg.innerHTML = message
            msg.style.opacity = 1
            msg.style.transform = 'translateY(0)'

            setTimeout(() => {
                msg.style.opacity = 0
                msg.style.transform = 'translateY(-100%)'
                msg.innerHTML = ''
                msg.style.backgroundColor = ''
            }, time)
            setTimeout(() => {
                msg.style.transform = 'translateY(30px)'
            }, time + 15);
        }, 100);
    }

    function evaluateGuess(guess, word) {
        const arr_guess = guess.split('')
        const arr_word = word.split('')
        const eval = [null, null, null, null, null]

        arr_guess.forEach((letter, i) => {
            if (letter === arr_word[i]) { // check for exact positions
                eval[i] = 'correct'
                arr_word[i] = '_'
            }
        })

        const arr_guess_set = Array.from(new Set(arr_guess))
        arr_guess_set.forEach((letter, i) => {
            if (arr_word.includes(letter)) { // check if the letter is in the word
                while (arr_word.indexOf(letter) !== -1) { // if it is, 
                    const index = arr_guess.indexOf(letter) // find the first occurence of the letter and 
                    if (!eval[index]) {
                        eval[index] = 'present' // mark it as present.
                    }
                    arr_word[arr_word.indexOf(letter)] = '_' // then remove that occurence from the word 
                    arr_guess[arr_guess.indexOf(letter)] = '_' // and the guess
                } // and keep checking until it's gone
            } else { // if neither present nor correct
                const index = arr_guess.indexOf(letter)
                if (!eval[index]) {
                    eval[index] = 'absent' // mark as absent
                }
            }
        })

        eval.forEach((e, i) => {
            if (!e) eval[i] = 'absent'
        })

        return eval
    }

    function getMarkedLetters(boardState) {
        let correct = []
        let present = []
        let absent = []
        const board = boardState.boardState // array of strings
        const evals = boardState.evaluations // array of arrays of evaluation results
        board.forEach((word, i) => {
            const eval = evals[i]
            word.split('').forEach((letter, j) => {
                if (eval[j] === 'correct') correct.push(letter)
                if (eval[j] === 'present') present.push(letter)
                if (eval[j] === 'absent') absent.push(letter)
            })
        })
        // remove duplicates
        const correct_non_dup = Array.from(new Set(correct))
        const present_non_dup = Array.from(new Set(present))
        const absent_non_dup = Array.from(new Set(absent))

        return {
            correct: correct_non_dup,
            present: present_non_dup,
            absent: absent_non_dup,
            correct_dup: correct,
            present_dup: present,
            absent_dup: absent
        }
    }

    function updateKeyboard() {
        keys.forEach(key => {
            if (markedLetters.correct.includes(key.innerText.toLowerCase())) {
                key.setAttribute('data-state', 'correct')
            } else if (markedLetters.present.includes(key.innerText.toLowerCase())) {
                key.setAttribute('data-state', 'present')
            } else if (markedLetters.absent.includes(key.innerText.toLowerCase())) {
                key.setAttribute('data-state', 'absent')
            }
        })
    }

    const shareButton = document.getElementById('stats-share')
    const stats_other = document.getElementById('stats-other')

    function getBoardText(boardState, mode) {
        mode = mode.charAt(0).toUpperCase() + mode.slice(1)

        let text = ''
        if (boardState.state === 'LOSE') { // header
            text += `Wordle: ${mode} - X/6\n\n`
        } else {
            text += `Wordle: ${mode} - ${boardState.rowIndex}/${6}\n\n`
        }

        const evals = boardState.evaluations

        evals.forEach((rowEval) => {
            if (rowEval === null) return
            rowEval.forEach((eval) => {
                if (eval === 'correct') text += '🟩'
                else if (eval === 'present') text += '🟨'
                else if (eval === 'absent') text += '⬛'
            })
            text += '\n'
        })
        return text
    }

    function updateShareButton(boardState, mode) {
        stats_other.setAttribute('data-btn-visible', 'true')

        shareButton.addEventListener('click', event => {
            event.preventDefault()
            if (shareButton.getAttribute('data-clicked')) return // prevent spamming
            if (boardState.state === 'IN_PROGRESS') return

            if (!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) { // if desktop (not mobile)
                shareButton.setAttribute('data-clicked', 'true')
                shareButton.innerText = 'Copied!'
                setTimeout(() => {
                    shareButton.innerText = 'Share'
                    shareButton.removeAttribute('data-clicked')
                }, 3000);
                navigator.clipboard.writeText(getBoardText(boardState, mode)) // copy the wordle game state to clipboard
            } else {
                shareButton.setAttribute('data-clicked', 'true')
                shareButton.innerText = 'Shared!'
                setTimeout(() => {
                    shareButton.innerText = 'Share'
                    shareButton.removeAttribute('data-clicked')
                }, 3000);

                if (navigator.share) { // if mobile and share API is supported
                    navigator.share({
                            text: getBoardText(boardState, mode), // wordle game state
                        })
                        .catch(console.error);
                } else {
                    navigator.clipboard.writeText(getBoardText(boardState, mode)) // copy the wordle game state to clipboard
                }
            }
        });
    }

    // stats
    const gamesPlayed = document.getElementById('num-played')
    const winPercent = document.getElementById('win-percent')
    const winStreak = document.getElementById('win-streak')
    const maxStreak = document.getElementById('max-streak')
    const avgCorerct = document.getElementById('avg-correct')
    const avgPresent = document.getElementById('avg-present')
    const avgAbsent = document.getElementById('avg-absent')
    const totalWordsGuessed = document.getElementById('words-guessed')

    // dist
    const graphBars = document.querySelectorAll('.graph-bar')
    const graphNums = document.querySelectorAll('.num-guesses')

    function updateStats(statistics, currentRowIndex) {
        gamesPlayed.innerText = statistics.gamesPlayed
        winPercent.innerText = statistics.gamesPlayed !== 0 ? `${Math.round(statistics.gamesWon / statistics.gamesPlayed * 100)}%` : 'N/A'
        winStreak.innerText = statistics.currentStreak
        maxStreak.innerText = statistics.maxStreak
        avgCorerct.innerText = statistics.wordsGuessed !== 0 ? (statistics.totalCorrect / statistics.wordsGuessed).toPrecision(2) : 'N/A'
        avgPresent.innerText = statistics.wordsGuessed !== 0 ? (statistics.totalPresent / statistics.wordsGuessed).toPrecision(2) : 'N/A'
        avgAbsent.innerText = statistics.wordsGuessed !== 0 ? (statistics.totalAbsent / statistics.wordsGuessed).toPrecision(2) : 'N/A'
        totalWordsGuessed.innerText = statistics.wordsGuessed

        const totalGuesses = Object.values(statistics.guesses).reduce((a, b) => a + b)
        graphBars.forEach((bar, i) => {
            const width = (statistics.guesses[i + 1] / totalGuesses) * 100
            bar.style.width = `${width === 0 ? 1 : width}%`
            graphNums[i].innerText = statistics.guesses[i + 1]
        })
        if (currentRowIndex || currentRowIndex === 0) graphBars[currentRowIndex].classList.add('highlight')
    }

    function resetBoardState(w) {
        window.localStorage.setItem(mode + '_boardState', JSON.stringify({
            "boardState": ["", "", "", "", "", ""],
            "evaluations": [null, null, null, null, null, null],
            "rowIndex": 0,
            "hardMode": false,
            "nextWordTS": w.nextWordTS,
            'state': 'IN_PROGRESS'
        }))
    }

    /* Wordle Game */
    const mode = window.localStorage.getItem('mode') || 'english'
    const gameRows = document.querySelectorAll('game-row')

    let word
    try {
        word = await fetch('/get_word?mode=' + mode).then(res => res.json()); // fetch word for the specific mode
    } catch (e) {
        window.localStorage.setItem('mode', 'english') // if there's an error in fetching the word from the selected mode, set the mode to english
        return window.location.reload()
    }

    if (!window.localStorage.getItem(mode + '_boardState')) resetBoardState(word) // if there is no board state, create a new board
    let boardState = JSON.parse(window.localStorage.getItem(mode + '_boardState')) // get the board state

    // check if it is a new day using the nextWordTS in localstorage
    if (boardState.nextWordTS !== word.nextWordTS) {
        // reset board state if it is not equal to the nextWordTS that was just fetched
        resetBoardState(word)
        return window.location.reload()
    }


    /* SHARE BUTTON */
    if (boardState.state !== 'IN_PROGRESS') updateShareButton(boardState, mode)


    /* STATS */
    // if there is no stats, create a new one
    if (!window.localStorage.getItem(mode + '_stats')) {
        window.localStorage.setItem(mode + '_stats', JSON.stringify({
            "gamesPlayed": 0,
            "currentStreak": 0,
            "gamesWon": 0,
            "guesses": {
                1: 0,
                2: 0,
                3: 0,
                4: 0,
                5: 0,
                6: 0,
            },
            "maxStreak": 0,
            "totalCorrect": 0,
            "totalPresent": 0,
            "totalAbsent": 0,
            "wordsGuessed": 0,
        }))
    }
    let stats = JSON.parse(window.localStorage.getItem(mode + '_stats')) // get the stats

    // update the stats
    if (boardState.state === 'IN_PROGRESS' || boardState.state === 'LOSE') {
        updateStats(stats, null)
    } else if (boardState.state === 'WIN') {
        updateStats(stats, boardState.rowIndex - 1) // -1 because the rowIndex is incremented after the row is finished
    }

    if (boardState.state !== 'IN_PROGRESS') {
        setTimeout(() => {
            openStats() // open the stats
        }, 2000);
    } else if (boardState.rowIndex === 0) {
        setTimeout(() => {
            openHelp()
        }, 200);
    }


    /* KEYBOARD */
    const keyboard = document.getElementById('keyboard')
    const keys = keyboard.querySelectorAll('button')
    let markedLetters = getMarkedLetters(boardState)
    let hardModeLetters = markedLetters.correct.concat(markedLetters.present)

    updateKeyboard() // update the keyboard colors


    /* LOADING PREVIOUS STATE */
    // load the board state into the game using the words stored and the evaluations
    boardState.boardState.forEach((word, i) => {
        if (word === '') return
        gameRows[i].setAttribute('letters', word)
        gameRows[i].querySelectorAll('game-tile').forEach((tile, j) => {
            tile.setAttribute('letter', word[j])
            tile.setAttribute('evaluation', boardState.evaluations[i][j])

            const divTile = tile.querySelector('.tile')
            divTile.innerText = word[j]
            divTile.setAttribute('data-state', boardState.evaluations[i][j])
            setTimeout(() => {
                flipTile(divTile)
            }, 200 + (j * 200));

        })
    })


    /* START LISTENING TO KEYBOARD */
    document.addEventListener('keydown', async (event) => {
        if (event.altKey || event.ctrlKey || event.metaKey) return
        boardState = JSON.parse(window.localStorage.getItem(mode + '_boardState')) // on every keypress, get the board state to make sure it is not stale data
        if (boardState.state === 'WIN') return displayMsg(`You Won! The word was <a href="https://www.thefreedictionary.com/${word.word}">${word.word}</a>`, 1000000, 'var(--full-modal-bkg-color)')
        else if (boardState.state === 'LOSE') return displayMsg(`You Lost :(, the word was <a href="https://www.thefreedictionary.com/${word.word}">${word.word}</a>` + word.word, 1000000, 'var(--full-modal-bkg-color)')

        if ((event.key.length > 1 || !/^([A-Z]|\á|\é|\í|\ó|\ú|\ñ)$/i.test(event.key)) && event.key !== 'Backspace' && event.key !== 'Enter') return // check if input is valid

        markedLetters = getMarkedLetters(boardState)

        const rowIndex = boardState.rowIndex // get the word row they are on
        const gameRow = gameRows[rowIndex] // and get the row element from the index
        const gameTiles = gameRow.querySelectorAll('game-tile')
        const tiles = gameRow.querySelectorAll('.tile') // get all tiles from the row

        let currentLetters = gameRow.getAttribute('letters') // the letters that are currently in the row

        if (event.key === 'Backspace') { // if backspace is pressed, remove the last letter in the last tile
            if (currentLetters.length === 0) return
            gameRow.setAttribute('letters', currentLetters.slice(0, currentLetters.length - 1))
            currentLetters = gameRow.getAttribute('letters')
            tiles[currentLetters.length].setAttribute('data-state', 'empty')
            tiles[currentLetters.length].innerText = ''

            gameTiles[currentLetters.length].setAttribute('letter', '')

            popTile(tiles[currentLetters.length])
        } else if (event.key === 'Enter') { // if submitted
            if (currentLetters.length !== 5) { // check if there are even 5 letters in the row
                displayMsg('Not enough letters', 2000, 'var(--full-modal-bkg-color)')
                return shakeRow(gameRow)
            } else if (boardState.boardState.find(w => w === currentLetters)) {
                shakeRow(gameRow)
                return displayMsg('Word already used', 2000, 'var(--full-modal-bkg-color)')
            } else {
                // hard mode checks
                if (boardState.hardMode) {
                    hardModeLetters = markedLetters.correct.concat(markedLetters.present)
                    let pass = [true, null]
                    hardModeLetters.forEach((letter, i, arr) => {
                        if (!currentLetters.split('').includes(letter)) {
                            pass = [false, arr[i]]
                        }
                    })
                    if (!pass[0]) {
                        displayMsg(`You must use <b style="margin: 0 5px">${pass[1].toUpperCase()}</b> in your guess`, 5000, 'var(--full-modal-bkg-color)')
                        return shakeRow(gameRow)
                    }
                }
                // check if the word exists
                const valid = await fetch(`/validate_word?mode=${mode}&word=${currentLetters}`).then(res => res.json());
                if (!valid) {
                    displayMsg('Invalid word', 2000, 'var(--full-modal-bkg-color)')
                    return shakeRow(gameRow)
                } else {
                    const eval = evaluateGuess(currentLetters.toLowerCase(), word.word.toLowerCase()) // evaluate the guess
                    // push eval to board state and tiles, update boardstate words, and row index
                    boardState.boardState[rowIndex] = currentLetters
                    boardState.evaluations[rowIndex] = eval
                    boardState.rowIndex = rowIndex + 1
                    window.localStorage.setItem(mode + '_boardState', JSON.stringify(boardState))

                    // update the tiles and animate them
                    eval.forEach((evaluation, i) => {
                        setTimeout(() => {
                            tiles[i].setAttribute('data-state', evaluation)
                            flipTile(tiles[i])
                        }, 100 + (i * 200));
                    })

                    // update keyboard colors
                    markedLetters = getMarkedLetters(boardState)
                    setTimeout(() => {
                        updateKeyboard()
                    }, 300 + (eval.length * 200));

                    // WIN
                    if (!eval.find(e => e === 'absent') && !eval.find(e => e === 'present')) { // there are only "correct" evaluations
                        boardState.state = 'WIN'
                        window.localStorage.setItem(mode + '_boardState', JSON.stringify(boardState))

                        // update stats
                        stats.currentStreak += 1
                        stats.gamesPlayed += 1
                        stats.gamesWon += 1
                        stats.guesses[rowIndex + 1] += 1 // no -1 here because the var has not been incremented yet, +1 because the guesses obj is 1-based
                        stats.maxStreak = Math.max(stats.maxStreak, stats.currentStreak)

                        stats.totalCorrect += markedLetters.correct_dup.length - 5 // subtract to remove the last word
                        stats.totalPresent += markedLetters.present_dup.length
                        stats.totalAbsent += markedLetters.absent_dup.length
                        stats.wordsGuessed += rowIndex

                        window.localStorage.setItem(mode + '_stats', JSON.stringify(stats))

                        updateStats(stats, rowIndex)
                        updateShareButton(boardState, mode)

                        // update the tiles and animate them
                        eval.forEach((evaluation, i) => {
                            setTimeout(() => {
                                tiles[i].setAttribute('data-state', evaluation)
                                tiles[i].classList.add('win')
                            }, 1200 + (i * 200));
                        })

                        setTimeout(() => { // get random message from the map
                            const setGrp = MESSAGES.get(mode) ? MESSAGES.get(mode) : MESSAGES.get('english')
                            const randomMsg = setGrp[rowIndex][(Math.round(Math.random() * (MESSAGES.get('english')[rowIndex].length - 1)))]
                            displayMsg(randomMsg, 10000, 'var(--full-modal-bkg-color)')
                            setTimeout(() => {
                                openStats()
                            }, 2000);
                        }, 500 + (eval.length * 200))
                        return
                    }
                    // LOSE
                    if (boardState.rowIndex === 6) {
                        boardState.state = 'LOSE'
                        window.localStorage.setItem(mode + '_boardState', JSON.stringify(boardState))

                        // update stats
                        stats.currentStreak = 0
                        stats.gamesPlayed += 1

                        stats.totalCorrect += markedLetters.correct_dup.length // subtract to remove the last word
                        stats.totalPresent += markedLetters.present_dup.length
                        stats.totalAbsent += markedLetters.absent_dup.length
                        stats.wordsGuessed += rowIndex

                        window.localStorage.setItem(mode + '_stats', JSON.stringify(stats))

                        updateStats(stats, null)
                        updateShareButton(boardState, mode)

                        setTimeout(() => {
                            displayMsg(`You Lost :(, the word was <a href="https://www.thefreedictionary.com/${word.word}">${word.word}</a>`, 1000000, 'var(--full-modal-bkg-color)')
                            setTimeout(() => {
                                openStats()
                            }, 2000);
                        }, 200 + (eval.length * 200));
                        return
                    }
                }
            }
        } else {
            if (currentLetters.length === 5) return
            gameRow.setAttribute('letters', currentLetters + event.key)
            tiles[currentLetters.length].setAttribute('data-state', 'tbd')
            tiles[currentLetters.length].setAttribute('data-animation', 'pop')
            setTimeout(() => {
                tiles[currentLetters.length].setAttribute('data-animation', 'idle')
            }, 100);
            tiles[currentLetters.length].innerText = event.key

            gameTiles[currentLetters.length].setAttribute('letter', event.key)

            popTile(tiles[currentLetters.length])
        }
    })
})()
    </script>
    <title>Wordle</title>
</head>

<body>
    <div id="large-modals">
        <div id="help-modal" class="modal">
            <div id="help-modal-header" class="modal-header">
                <div></div>
                <div id="help-modal-title" class="modal-title">How To Play</div>
                <div class="modal-close"></div>
            </div>
            <div id="help-modal-content" class="modal-content">
                <p>You have <b>6 (six)</b> tries to guess the WORDLE</p>
                <p>Each guess must be a valid <b>five-letter</b> word. Hit the enter button or enter key to submit.</p>
                <p>After you make a guess, the color of the tiles of your guess will change to indicate how close (or
                    not close) your guess was from the word.</p>
                <br />
                <div id="help-examples">
                    <h3>Examples:</h3>
                    <div class="example">
                        <div class="row">
                            <game-tile letter="w" evaluation="correct" reveal>
                                <div class="tile" data-state="correct" data-animation="idle">w</div>
                            </game-tile>
                            <game-tile letter="e">
                                <div class="tile" data-state="tbd" data-animation="idle">e</div>
                            </game-tile>
                            <game-tile letter="a">
                                <div class="tile" data-state="tbd" data-animation="idle">a</div>
                            </game-tile>
                            <game-tile letter="r">
                                <div class="tile" data-state="tbd" data-animation="idle">r</div>
                            </game-tile>
                            <game-tile letter="y">
                                <div class="tile" data-state="tbd" data-animation="idle">y</div>
                            </game-tile>
                        </div>
                        <p>The letter <b>W</b> is in the word and in the correct spot.</p>
                    </div>
                    <div class="example">
                        <div class="row">
                            <game-tile letter="p">
                                <div class="tile" data-state="tbd" data-animation="idle">p</div>
                            </game-tile>
                            <game-tile letter="i" evaluation="present" reveal>
                                <div class="tile" data-state="present" data-animation="idle">i</div>
                            </game-tile>
                            <game-tile letter="l">
                                <div class="tile" data-state="tbd" data-animation="idle">l</div>
                            </game-tile>
                            <game-tile letter="l">
                                <div class="tile" data-state="tbd" data-animation="idle">l</div>
                            </game-tile>
                            <game-tile letter="s">
                                <div class="tile" data-state="tbd" data-animation="idle">s</div>
                            </game-tile>
                        </div>
                        <p>The letter <b>I</b> is in the word, but is not in the correct spot.</p>
                    </div>
                    <div class="example">
                        <div class="row">
                            <game-tile letter="v">
                                <div class="tile" data-state="tbd" data-animation="idle">v</div>
                            </game-tile>
                            <game-tile letter="a">
                                <div class="tile" data-state="tbd" data-animation="idle">a</div>
                            </game-tile>
                            <game-tile letter="g">
                                <div class="tile" data-state="tbd" data-animation="idle">g</div>
                            </game-tile>
                            <game-tile letter="u" evaluation="absent" reveal>
                                <div class="tile" data-state="absent" data-animation="idle">u</div>
                            </game-tile>
                            <game-tile letter="e">
                                <div class="tile" data-state="tbd" data-animation="idle">e</div>
                            </game-tile>
                        </div>
                        <p>The letter <b>U</b> is not in the word.</p>
                    </div>
                </div>
            </div>
        </div>
        <div id="settings-modal" class="modal">
            <div id="settings-modal-header" class="modal-header">
                <div></div>
                <div id="settings-modal-title" class="modal-title">Settings</div>
                <div class="modal-close"></div>
            </div>
            <div id="settings-modal-content" class="modal-content">

                <div id="hard-mode-switch-container" class="setting-container">
                    <div class="setting-label">
                        <label>Hard Mode</label>
                        <h5>Any revealed hints must be used in subsequent guesses</h5>
                        <h6 style="color: rgb(238, 129, 129);">Can only be toggled <b>before</b> starting</h6>
                    </div>
                    <div id="hard-mode-switch" class="switch">
                        <input id="hard-mode-checkbox" type="checkbox">
                        <div></div>
                    </div>
                </div>

                <div id="theme-switch-container" class="setting-container">
                    <div class="setting-label">
                        <label>Theme</label>
                        <h6>Switch between dark and light mode</h6>
                    </div>
                    <div id="theme-switch" class="switch">
                        <input id='theme-checkbox' type="checkbox">
                        <div></div>
                    </div>
                </div>

                <div id="mode-switch-container" class="setting-container">
                    <div class="setting-label">
                        <label>Switch Word Theme</label>
                        <h6>Switch between different languages or themes of words</h6>
                    </div>
                    <div id="mode-switch" class="select">
                        <select id="modes-select">
                            <optgroup label="Languages">
                                <option value="english">English</option>
                                <option value="spanish">Spanish</option>
                            </optgroup>
                            <optgroup label="Other Modes">
                                <option value="foods">Foods</option>
                            </optgroup>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="small-modals">
        <div id="stats-modal" class="small-modal">
            <div id="settings-modal-header" class="modal-header">
                <div></div>
                <div id="settings-modal-title" class="modal-title">Statistics</div>
                <div class="modal-close"></div>
            </div>
            <div id="stats-content">
                <div id="stats-info">
                    <div id="stats-row" class="stats-row">
                        <div id="stats-num-played">
                            <h4 id="num-played">0</h4>
                            <h6>Games Played</h6>
                        </div>
                        <div id="stats-win-percent">
                            <h4 id="win-percent">0%</h4>
                            <h6>Win %</h6>
                        </div>
                        <div id="stats-win-streak">
                            <h4 id="win-streak">0</h4>
                            <h6>Win Streak</h6>
                        </div>
                        <div id="stats-max-streak">
                            <h4 id="max-streak">0</h4>
                            <h6>Max Win Streak</h6>
                        </div>
                        <div id="stats-avg-correct">
                            <h4 id="avg-correct">0%</h4>
                            <h6>
                                Avg Correct Letters
                                <br />
                                Per Word
                            </h6>
                        </div>
                        <div id="stats-avg-present">
                            <h4 id="avg-present">0%</h4>
                            <h6>
                                Avg Present Letters
                                <br />
                                Per Word
                            </h6>
                        </div>
                        <div id="stats-avg-absent">
                            <h4 id="avg-absent">0%</h4>
                            <h6>
                                Avg Absent Letters
                                <br />
                                Per Word
                            </h6>
                        </div>
                        <div id="stats-words-guessed">
                            <h4 id="words-guessed">0</h4>
                            <h6>
                                Total Words Guessed
                            </h6>
                        </div>
                    </div>
                </div>
                <div id="stats-dist">
                    <h3>Guess Distribution</h3>
                    <div id="guess-distribution">
                        <div class="graph-container">
                            <div class="guess">1</div>
                            <div class="graph">
                                <div class="graph-bar align-right">
                                    <div class="num-guesses"></div>
                                </div>
                            </div>
                        </div>
                        <div class="graph-container">
                            <div class="guess">2</div>
                            <div class="graph">
                                <div class="graph-bar align-right">
                                    <div class="num-guesses"></div>
                                </div>
                            </div>
                        </div>
                        <div class="graph-container">
                            <div class="guess">3</div>
                            <div class="graph">
                                <div class="graph-bar align-right">
                                    <div class="num-guesses"></div>
                                </div>
                            </div>
                        </div>
                        <div class="graph-container">
                            <div class="guess">4</div>
                            <div class="graph">
                                <div class="graph-bar align-right">
                                    <div class="num-guesses"></div>
                                </div>
                            </div>
                        </div>
                        <div class="graph-container">
                            <div class="guess">5</div>
                            <div class="graph">
                                <div class="graph-bar align-right">
                                    <div class="num-guesses"></div>
                                </div>
                            </div>
                        </div>
                        <div class="graph-container">
                            <div class="guess">6</div>
                            <div class="graph">
                                <div class="graph-bar align-right">
                                    <div class="num-guesses"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="stats-other" data-btn-visible="false">
                    <div id="stats-timer">
                        <div id="timer">
                            <div id="time-left"></div>
                            <div id="timer-back">
                                <div id="timer-mask"></div>
                                <div id="timer-pie"></div>
                            </div>
                        </div>
                    </div>
                    <button id="stats-share">
                        Share
                    </button>
                </div>
            </div>
        </div>
    </div>

    <header>
        <div id="menu-left">
            <div id="help"></div>
        </div>
        <div id="title-container">
            <div id="title">
                Wordle:
            </div>
            <div id="title-mode"></div>
        </div>
        <div id="menu-right">
            <div id="stats"></div>
            <div id="settings"></div>
        </div>
    </header>

    <div id="game">
        <div id="msg"></div>
        <div id="board-container">
            <div id="board">
                <game-row letters="" length="5">
                    <div class="row">
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                    </div>
                </game-row>
                <game-row letters="" length="5">
                    <div class="row">
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                    </div>
                </game-row>
                <game-row letters="" length="5">
                    <div class="row">
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                    </div>
                </game-row>
                <game-row letters="" length="5">
                    <div class="row">
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                    </div>
                </game-row>
                <game-row letters="" length="5">
                    <div class="row">
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                    </div>
                </game-row>
                <game-row letters="" length="5">
                    <div class="row">
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                        <game-tile>
                            <div class="tile" data-state="empty" data-animation="idle"></div>
                        </game-tile>
                    </div>
                </game-row>
            </div>
        </div>

        <div id="keyboard-container">
            <div id="keyboard">
                <div class="k-row">
                    <button data-key="q">q</button>
                    <button data-key="w">w</button>
                    <button data-key="e">e</button>
                    <button data-key="r">r</button>
                    <button data-key="t">t</button>
                    <button data-key="y">y</button>
                    <button data-key="u">u</button>
                    <button data-key="i">i</button>
                    <button data-key="o">o</button>
                    <button data-key="p">p</button>
                </div>
                <div class="k-row">
                    <div class="spacer half"></div>
                    <button data-key="a">a</button>
                    <button data-key="s">s</button>
                    <button data-key="d">d</button>
                    <button data-key="f">f</button>
                    <button data-key="g">g</button>
                    <button data-key="h">h</button>
                    <button data-key="j">j</button>
                    <button data-key="k">k</button>
                    <button data-key="l">l</button>
                    <div class="spacer half"></div>
                </div>
                <div class="k-row">
                    <button data-key="Enter" class="one-and-a-half">enter</button>
                    <button data-key="z">z</button>
                    <button data-key="x">x</button>
                    <button data-key="c">c</button>
                    <button data-key="v">v</button>
                    <button data-key="b">b</button>
                    <button data-key="n">n</button>
                    <button data-key="m">m</button>
                    <button data-key="Backspace" class="one-and-a-half">
                        <div id="backspace"></div>
                    </button>
                </div>
                <div class="k-row accents">
                    <button data-key="á">á</button>
                    <button data-key="é">é</button>
                    <button data-key="í">í</button>
                    <button data-key="ó">ó</button>
                    <button data-key="ú">ú</button>
                    <button data-key="ñ">ñ</button>
                </div>
            </div>

        </div>
    </div>
</body>

</html>